<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>MobX RESTful migrator</title><meta name="description" content="Documentation for MobX RESTful migrator"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">MobX RESTful migrator</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>MobX RESTful migrator</h1></div><div class="tsd-panel tsd-typography"><h1 id="mobx-restful-migrator" class="tsd-anchor-link">MobX RESTful migrator<a href="#mobx-restful-migrator" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Data Migration framework based on <a href="https://github.com/idea2app/MobX-RESTful">MobX-RESTful</a></p>
<p><a href="https://libraries.io/npm/mobx-restful-migrator"><img src="https://img.shields.io/librariesio/github/idea2app/MobX-RESTful-migrator.svg" alt="NPM Dependency"></a>
<a href="https://github.com/idea2app/MobX-RESTful-migrator/actions/workflows/main.yml"><img src="https://github.com/idea2app/MobX-RESTful-migrator/actions/workflows/main.yml/badge.svg" alt="CI &amp; CD"></a></p>
<p><a href="https://nodei.co/npm/mobx-restful-migrator/"><img src="https://nodei.co/npm/mobx-restful-migrator.png?downloads=true&amp;downloadRank=true&amp;stars=true" alt="NPM"></a></p>
<h2 id="overview" class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>MobX-RESTful-migrator is a TypeScript library that provides a flexible data migration framework built on top of MobX-RESTful's ListModel abstraction. It allows you to migrate data from various sources through MobX-RESTful models with customizable field mappings and relationships.</p>
<h2 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><strong>Flexible Field Mappings</strong>: Support for four different mapping types</li>
<li><strong>Async Generator Pattern</strong>: Control migration flow at your own pace</li>
<li><strong>Cross-table Relationships</strong>: Handle complex data relationships</li>
<li><strong>Event-Driven Architecture</strong>: Built-in console logging with customizable event bus</li>
<li><strong>TypeScript Support</strong>: Full TypeScript support with type safety</li>
</ul>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">mobx-restful</span><span class="hl-1"> </span><span class="hl-2">mobx-restful-migrator</span>
</code><button type="button">Copy</button></pre>

<h2 id="usage-example-database-migration" class="tsd-anchor-link">Usage Example: Database migration<a href="#usage-example-database-migration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The typical use case is migrating data between 2 databases via RESTful API:</p>
<ul>
<li><strong>Source</strong>: Article table with Title, Keywords, Content, Author, Email fields</li>
<li><strong>Target</strong>: Keywords field splits into Category string &amp; Tags array, Author &amp; Email fields map to User table</li>
</ul>
<h3 id="source-data-schema" class="tsd-anchor-link">Source Data Schema<a href="#source-data-schema" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">interface</span><span class="hl-1"> </span><span class="hl-4">SourceArticle</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">id</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">title</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">subtitle</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">keywords</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">; </span><span class="hl-6">// comma-separated keywords to split into category &amp; tags</span><br/><span class="hl-1">  </span><span class="hl-5">content</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">author</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">; </span><span class="hl-6">// maps to User table &quot;name&quot; field</span><br/><span class="hl-1">  </span><span class="hl-5">email</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">; </span><span class="hl-6">// maps to User table &quot;email&quot; field</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="target-models" class="tsd-anchor-link">Target Models<a href="#target-models" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">HTTPClient</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;koajax&#39;</span><span class="hl-1">;</span><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">ListModel</span><span class="hl-1">, </span><span class="hl-5">DataObject</span><span class="hl-1">, </span><span class="hl-5">Filter</span><span class="hl-1">, </span><span class="hl-5">IDType</span><span class="hl-1">, </span><span class="hl-5">toggle</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;mobx-restful&#39;</span><span class="hl-1">;</span><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">buildURLData</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;web-utility&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">export</span><span class="hl-1"> </span><span class="hl-3">abstract</span><span class="hl-1"> </span><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-4">TableModel</span><span class="hl-1">&lt;</span><br/><span class="hl-1">  </span><span class="hl-4">D</span><span class="hl-1"> </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-4">DataObject</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">F</span><span class="hl-1"> </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-4">Filter</span><span class="hl-1">&lt;</span><span class="hl-4">D</span><span class="hl-1">&gt; = </span><span class="hl-4">Filter</span><span class="hl-1">&lt;</span><span class="hl-4">D</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">&gt; </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-4">ListModel</span><span class="hl-1">&lt;</span><span class="hl-4">D</span><span class="hl-1">, </span><span class="hl-4">F</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-5">client</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">HTTPClient</span><span class="hl-1">({ </span><span class="hl-5">baseURI:</span><span class="hl-1"> </span><span class="hl-2">&#39;http://localhost:8080&#39;</span><span class="hl-1">, </span><span class="hl-5">responseType:</span><span class="hl-1"> </span><span class="hl-2">&#39;json&#39;</span><span class="hl-1"> });</span><br/><br/><span class="hl-1">  @</span><span class="hl-0">toggle</span><span class="hl-1">(</span><span class="hl-2">&#39;uploading&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">updateOne</span><span class="hl-1">(</span><span class="hl-5">data</span><span class="hl-1">: </span><span class="hl-4">Filter</span><span class="hl-1">&lt;</span><span class="hl-4">D</span><span class="hl-1">&gt;, </span><span class="hl-5">id</span><span class="hl-1">?: </span><span class="hl-4">IDType</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-8">body</span><span class="hl-1"> } = </span><span class="hl-7">await</span><span class="hl-1"> (</span><span class="hl-5">id</span><br/><span class="hl-1">      ? </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">put</span><span class="hl-1">&lt;</span><span class="hl-4">D</span><span class="hl-1">&gt;(</span><span class="hl-2">`</span><span class="hl-3">${</span><span class="hl-3">this</span><span class="hl-9">.</span><span class="hl-5">baseURI</span><span class="hl-3">}</span><span class="hl-2">/</span><span class="hl-3">${</span><span class="hl-5">id</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1">, </span><span class="hl-5">data</span><span class="hl-1">)</span><br/><span class="hl-1">      : </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">post</span><span class="hl-1">&lt;</span><span class="hl-4">D</span><span class="hl-1">&gt;(</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">baseURI</span><span class="hl-1">, </span><span class="hl-5">data</span><span class="hl-1">));</span><br/><br/><span class="hl-1">    </span><span class="hl-7">return</span><span class="hl-1"> (</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">currentOne</span><span class="hl-1"> = </span><span class="hl-5">body</span><span class="hl-1">!);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">loadPage</span><span class="hl-1">(</span><span class="hl-5">pageIndex</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">, </span><span class="hl-5">pageSize</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">, </span><span class="hl-5">filter</span><span class="hl-1">: </span><span class="hl-4">F</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-8">body</span><span class="hl-1"> } = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">&lt;{ </span><span class="hl-5">list</span><span class="hl-1">: </span><span class="hl-4">D</span><span class="hl-1">[]; </span><span class="hl-5">count</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1"> }&gt;(</span><br/><span class="hl-1">      </span><span class="hl-2">`</span><span class="hl-3">${</span><span class="hl-3">this</span><span class="hl-9">.</span><span class="hl-5">baseURI</span><span class="hl-3">}</span><span class="hl-2">?</span><span class="hl-3">${</span><span class="hl-0">buildURLData</span><span class="hl-9">({ </span><span class="hl-1">...</span><span class="hl-5">filter</span><span class="hl-9">, </span><span class="hl-5">pageIndex</span><span class="hl-9">, </span><span class="hl-5">pageSize</span><span class="hl-9"> })</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1">,</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">    </span><span class="hl-7">return</span><span class="hl-1"> { </span><span class="hl-5">pageData:</span><span class="hl-1"> </span><span class="hl-5">body</span><span class="hl-1">!.</span><span class="hl-5">list</span><span class="hl-1">, </span><span class="hl-5">totalCount:</span><span class="hl-1"> </span><span class="hl-5">body</span><span class="hl-1">!.</span><span class="hl-5">count</span><span class="hl-1"> };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">export</span><span class="hl-1"> </span><span class="hl-3">interface</span><span class="hl-1"> </span><span class="hl-4">User</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">id</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">name</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">email</span><span class="hl-1">?: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">export</span><span class="hl-1"> </span><span class="hl-3">interface</span><span class="hl-1"> </span><span class="hl-4">Article</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">id</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">title</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">category</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">tags</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">[];</span><br/><span class="hl-1">  </span><span class="hl-5">content</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">author</span><span class="hl-1">: </span><span class="hl-4">User</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">export</span><span class="hl-1"> </span><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-4">UserModel</span><span class="hl-1"> </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-4">TableModel</span><span class="hl-1">&lt;</span><span class="hl-4">User</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-5">baseURI</span><span class="hl-1"> = </span><span class="hl-2">&#39;/users&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">export</span><span class="hl-1"> </span><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-4">ArticleModel</span><span class="hl-1"> </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-4">TableModel</span><span class="hl-1">&lt;</span><span class="hl-4">Article</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-5">baseURI</span><span class="hl-1"> = </span><span class="hl-2">&#39;/articles&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="migration-configuration" class="tsd-anchor-link">Migration Configuration<a href="#migration-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>First, export your CSV data file <code>articles.csv</code> from an Excel file or Old database:</p>
<pre><code class="csv">title,subtitle,keywords,content,author,email
Introduction to TypeScript,A Comprehensive Guide,"typescript,javascript,programming","TypeScript is a typed superset of JavaScript...",John Doe,john@example.com
MobX State Management,Made Simple,"mobx,react,state-management","MobX makes state management simple...",Jane Smith,jane@example.com
</code><button type="button">Copy</button></pre>

<p>Then implement the migration:</p>
<pre><code class="typescript"><span class="hl-6">#! /usr/bin/env tsx</span><br/><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">RestMigrator</span><span class="hl-1">, </span><span class="hl-5">MigrationSchema</span><span class="hl-1">, </span><span class="hl-5">ConsoleLogger</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;mobx-restful-migrator&#39;</span><span class="hl-1">;</span><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">FileHandle</span><span class="hl-1">, </span><span class="hl-5">open</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;fs/promises&#39;</span><span class="hl-1">;</span><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">readTextTable</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;web-utility&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">SourceArticle</span><span class="hl-1">, </span><span class="hl-5">Article</span><span class="hl-1">, </span><span class="hl-5">ArticleModel</span><span class="hl-1">, </span><span class="hl-5">UserModel</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./source&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Load and parse CSV data using async streaming for large files</span><br/><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-3">function*</span><span class="hl-1"> </span><span class="hl-0">readCSV</span><span class="hl-1">&lt;</span><span class="hl-4">T</span><span class="hl-1"> </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-4">object</span><span class="hl-1">&gt;(</span><span class="hl-5">path</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">fileHandle</span><span class="hl-1">: </span><span class="hl-4">FileHandle</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">fileHandle</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">open</span><span class="hl-1">(</span><span class="hl-5">path</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">stream</span><span class="hl-1"> = </span><span class="hl-5">fileHandle</span><span class="hl-1">.</span><span class="hl-0">createReadStream</span><span class="hl-1">({ </span><span class="hl-5">encoding:</span><span class="hl-1"> </span><span class="hl-2">&#39;utf-8&#39;</span><span class="hl-1"> });</span><br/><br/><span class="hl-1">    </span><span class="hl-7">yield</span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-0">readTextTable</span><span class="hl-1">&lt;</span><span class="hl-4">T</span><span class="hl-1">&gt;(</span><span class="hl-5">stream</span><span class="hl-1">, </span><span class="hl-3">true</span><span class="hl-1">) </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">AsyncGenerator</span><span class="hl-1">&lt;</span><span class="hl-4">T</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  } </span><span class="hl-7">finally</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-5">fileHandle</span><span class="hl-1">?.</span><span class="hl-0">close</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-0">loadSourceArticles</span><span class="hl-1"> = () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">readCSV</span><span class="hl-1">&lt;</span><span class="hl-4">SourceArticle</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;article.csv&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// Complete migration configuration demonstrating all 4 mapping types</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">mapping</span><span class="hl-1">: </span><span class="hl-4">MigrationSchema</span><span class="hl-1">&lt;</span><span class="hl-4">SourceArticle</span><span class="hl-1">, </span><span class="hl-4">Article</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-6">// 1. Many-to-One mapping: Title + Subtitle → combined title</span><br/><span class="hl-1">  </span><span class="hl-0">title</span><span class="hl-5">:</span><span class="hl-1"> ({ </span><span class="hl-5">title</span><span class="hl-1">, </span><span class="hl-5">subtitle</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">    </span><span class="hl-5">title:</span><span class="hl-1"> { </span><span class="hl-5">value:</span><span class="hl-1"> </span><span class="hl-2">`</span><span class="hl-3">${</span><span class="hl-5">title</span><span class="hl-3">}</span><span class="hl-2">: </span><span class="hl-3">${</span><span class="hl-5">subtitle</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1"> },</span><br/><span class="hl-1">  }),</span><br/><span class="hl-1">  </span><span class="hl-5">content:</span><span class="hl-1"> </span><span class="hl-2">&#39;content&#39;</span><span class="hl-1">,</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// 2. One-to-Many mapping: Keywords string → category string &amp; tags array</span><br/><span class="hl-1">  </span><span class="hl-0">keywords</span><span class="hl-5">:</span><span class="hl-1"> ({ </span><span class="hl-5">keywords</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> [</span><span class="hl-8">category</span><span class="hl-1">, ...</span><span class="hl-8">tags</span><span class="hl-1">] = </span><span class="hl-5">keywords</span><span class="hl-1">.</span><span class="hl-0">split</span><span class="hl-1">(</span><span class="hl-2">&#39;,&#39;</span><span class="hl-1">).</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-5">tag</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-5">tag</span><span class="hl-1">.</span><span class="hl-0">trim</span><span class="hl-1">());</span><br/><br/><span class="hl-1">    </span><span class="hl-7">return</span><span class="hl-1"> { </span><span class="hl-5">category:</span><span class="hl-1"> { </span><span class="hl-5">value:</span><span class="hl-1"> </span><span class="hl-5">category</span><span class="hl-1"> }, </span><span class="hl-5">tags:</span><span class="hl-1"> { </span><span class="hl-5">value:</span><span class="hl-1"> </span><span class="hl-5">tags</span><span class="hl-1"> } };</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">// 3. Cross-table relationship: Author &amp; Email → User table</span><br/><span class="hl-1">  </span><span class="hl-0">author</span><span class="hl-5">:</span><span class="hl-1"> ({ </span><span class="hl-5">author</span><span class="hl-1">, </span><span class="hl-5">email</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">    </span><span class="hl-5">author:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">value:</span><span class="hl-1"> { </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-5">author</span><span class="hl-1">, </span><span class="hl-5">email</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-5">model:</span><span class="hl-1"> </span><span class="hl-5">UserModel</span><span class="hl-1">, </span><span class="hl-6">// Maps to User table via ListModel</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }),</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-6">// Run migration with built-in console logging (default)</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">migrator</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">RestMigrator</span><span class="hl-1">(</span><span class="hl-5">loadSourceArticles</span><span class="hl-1">, </span><span class="hl-5">ArticleModel</span><span class="hl-1">, </span><span class="hl-5">mapping</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// The ConsoleLogger automatically logs each step:</span><br/><span class="hl-6">// - saved No.X: successful migrations with source, mapped, and target data</span><br/><span class="hl-6">// - skipped No.X: skipped items (duplicate unique fields)</span><br/><span class="hl-6">// - error at No.X: migration errors with details</span><br/><br/><span class="hl-7">for</span><span class="hl-1"> </span><span class="hl-7">await</span><span class="hl-1"> (</span><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-8">title</span><span class="hl-1"> } </span><span class="hl-3">of</span><span class="hl-1"> </span><span class="hl-5">migrator</span><span class="hl-1">.</span><span class="hl-0">boot</span><span class="hl-1">()) {</span><br/><span class="hl-1">  </span><span class="hl-6">// Process the migrated target objects</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Successfully migrated article: </span><span class="hl-3">${</span><span class="hl-5">title</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>In the end, run your script with a TypeScript runtime:</p>
<pre><code class="bash"><span class="hl-0">tsx</span><span class="hl-1"> </span><span class="hl-2">your-migration.ts</span><span class="hl-1"> 1&gt; </span><span class="hl-2">saved.log</span><span class="hl-1"> 2&gt; </span><span class="hl-2">error.log</span>
</code><button type="button">Copy</button></pre>

<h3 id="optional-use-custom-event-bus" class="tsd-anchor-link">Optional: Use custom event bus<a href="#optional-use-custom-event-bus" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-4">CustomEventBus</span><span class="hl-1"> </span><span class="hl-3">implements</span><span class="hl-1"> </span><span class="hl-4">MigrationEventBus</span><span class="hl-1">&lt;</span><span class="hl-4">SourceArticle</span><span class="hl-1">, </span><span class="hl-4">Article</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">save</span><span class="hl-1">({ </span><span class="hl-5">index</span><span class="hl-1">, </span><span class="hl-5">targetItem</span><span class="hl-1"> }) {</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">info</span><span class="hl-1">(</span><span class="hl-2">`✅ Migrated article </span><span class="hl-3">${</span><span class="hl-5">index</span><span class="hl-3">}</span><span class="hl-2">: </span><span class="hl-3">${</span><span class="hl-5">targetItem</span><span class="hl-9">?.</span><span class="hl-5">title</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">skip</span><span class="hl-1">({ </span><span class="hl-5">index</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1"> }) {</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">warn</span><span class="hl-1">(</span><span class="hl-2">`⚠️  Skipped article </span><span class="hl-3">${</span><span class="hl-5">index</span><span class="hl-3">}</span><span class="hl-2">: </span><span class="hl-3">${</span><span class="hl-5">error</span><span class="hl-9">?.</span><span class="hl-5">message</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">error</span><span class="hl-1">({ </span><span class="hl-5">index</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1"> }) {</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">`❌ Error at article </span><span class="hl-3">${</span><span class="hl-5">index</span><span class="hl-3">}</span><span class="hl-2">: </span><span class="hl-3">${</span><span class="hl-5">error</span><span class="hl-9">?.</span><span class="hl-5">message</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">migratorWithCustomLogger</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">RestMigrator</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-5">loadSourceArticles</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">ArticleModel</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">mapping</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">CustomEventBus</span><span class="hl-1">(),</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="usage-example-data-crawler" class="tsd-anchor-link">Usage Example: Data crawler<a href="#usage-example-data-crawler" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>A simple data crawler that fetches data from a RESTful API and saves it to a local YAML file:</p>
<pre><code class="typescript"><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">RestMigrator</span><span class="hl-1">, </span><span class="hl-5">YAMLListModel</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;mobx-restful-migrator&#39;</span><span class="hl-1">;</span><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">sleep</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;web-utility&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">interface</span><span class="hl-1"> </span><span class="hl-4">CrawledData</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">fieldA</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">fieldB</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">fieldC</span><span class="hl-1">: </span><span class="hl-4">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">// ...</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-3">function*</span><span class="hl-1"> </span><span class="hl-0">dataSource</span><span class="hl-1">(): </span><span class="hl-4">AsyncGenerator</span><span class="hl-1">&lt;</span><span class="hl-4">CrawledData</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-7">for</span><span class="hl-1"> (</span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">i</span><span class="hl-1"> = </span><span class="hl-10">1</span><span class="hl-1">; </span><span class="hl-5">i</span><span class="hl-1"> &lt;= </span><span class="hl-10">100</span><span class="hl-1">; </span><span class="hl-5">i</span><span class="hl-1">++) {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">response</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">fetch</span><span class="hl-1">(</span><span class="hl-2">`https://api.example.com/page/</span><span class="hl-3">${</span><span class="hl-5">i</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-7">yield</span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-5">response</span><span class="hl-1">.</span><span class="hl-0">json</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-4">TargetListModel</span><span class="hl-1"> </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-4">YAMLListModel</span><span class="hl-1">&lt;</span><span class="hl-4">CrawledData</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-3">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-3">super</span><span class="hl-1">(</span><span class="hl-2">&#39;.data/crawled.yml&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">crawler</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">RestMigrator</span><span class="hl-1">(</span><span class="hl-5">dataSource</span><span class="hl-1">, </span><span class="hl-5">TargetListModel</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-5">fieldA:</span><span class="hl-1"> </span><span class="hl-2">&#39;fieldA&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">fieldB:</span><span class="hl-1"> </span><span class="hl-2">&#39;fieldB&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">fieldC:</span><span class="hl-1"> </span><span class="hl-2">&#39;fieldC&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// ...</span><br/><span class="hl-1">});</span><br/><span class="hl-7">for</span><span class="hl-1"> </span><span class="hl-7">await</span><span class="hl-1"> (</span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">item</span><span class="hl-1"> </span><span class="hl-3">of</span><span class="hl-1"> </span><span class="hl-5">crawler</span><span class="hl-1">.</span><span class="hl-0">boot</span><span class="hl-1">()) </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">sleep</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h2 id="four-mapping-types" class="tsd-anchor-link">Four Mapping Types<a href="#four-mapping-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="1-simple-1-to-1-mapping" class="tsd-anchor-link">1. Simple 1-to-1 Mapping<a href="#1-simple-1-to-1-mapping" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Map source field directly to target field using string mapping:</p>
<pre><code class="typescript"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">mapping</span><span class="hl-1">: </span><span class="hl-4">MigrationSchema</span><span class="hl-1">&lt;</span><span class="hl-4">SourceArticle</span><span class="hl-1">, </span><span class="hl-4">Article</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-5">title:</span><span class="hl-1"> </span><span class="hl-2">&#39;title&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">content:</span><span class="hl-1"> </span><span class="hl-2">&#39;content&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h3 id="2-many-to-one-mapping" class="tsd-anchor-link">2. Many-to-One Mapping<a href="#2-many-to-one-mapping" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use resolver function to combine multiple source fields into one target field:</p>
<pre><code class="typescript"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">mapping</span><span class="hl-1">: </span><span class="hl-4">MigrationSchema</span><span class="hl-1">&lt;</span><span class="hl-4">SourceArticle</span><span class="hl-1">, </span><span class="hl-4">Article</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-0">title</span><span class="hl-5">:</span><span class="hl-1"> ({ </span><span class="hl-5">title</span><span class="hl-1">, </span><span class="hl-5">subtitle</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">    </span><span class="hl-5">title:</span><span class="hl-1"> { </span><span class="hl-5">value:</span><span class="hl-1"> </span><span class="hl-2">`</span><span class="hl-3">${</span><span class="hl-5">title</span><span class="hl-3">}</span><span class="hl-2">: </span><span class="hl-3">${</span><span class="hl-5">subtitle</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1"> },</span><br/><span class="hl-1">  }),</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h3 id="3-one-to-many-mapping" class="tsd-anchor-link">3. One-to-Many Mapping<a href="#3-one-to-many-mapping" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use resolver function to map one source field to multiple target fields with <code>value</code> property:</p>
<pre><code class="typescript"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">mapping</span><span class="hl-1">: </span><span class="hl-4">MigrationSchema</span><span class="hl-1">&lt;</span><span class="hl-4">SourceArticle</span><span class="hl-1">, </span><span class="hl-4">Article</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-0">keywords</span><span class="hl-5">:</span><span class="hl-1"> ({ </span><span class="hl-5">keywords</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> [</span><span class="hl-8">category</span><span class="hl-1">, ...</span><span class="hl-8">tags</span><span class="hl-1">] = </span><span class="hl-5">keywords</span><span class="hl-1">.</span><span class="hl-0">split</span><span class="hl-1">(</span><span class="hl-2">&#39;,&#39;</span><span class="hl-1">).</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-5">tag</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-5">tag</span><span class="hl-1">.</span><span class="hl-0">trim</span><span class="hl-1">());</span><br/><br/><span class="hl-1">    </span><span class="hl-7">return</span><span class="hl-1"> { </span><span class="hl-5">category:</span><span class="hl-1"> { </span><span class="hl-5">value:</span><span class="hl-1"> </span><span class="hl-5">category</span><span class="hl-1"> }, </span><span class="hl-5">tags:</span><span class="hl-1"> { </span><span class="hl-5">value:</span><span class="hl-1"> </span><span class="hl-5">tags</span><span class="hl-1"> } };</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h3 id="4-cross-table-relationships" class="tsd-anchor-link">4. Cross-Table Relationships<a href="#4-cross-table-relationships" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use resolver function with <code>model</code> property for related tables:</p>
<pre><code class="typescript"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">mapping</span><span class="hl-1">: </span><span class="hl-4">MigrationSchema</span><span class="hl-1">&lt;</span><span class="hl-4">SourceArticle</span><span class="hl-1">, </span><span class="hl-4">Article</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-0">author</span><span class="hl-5">:</span><span class="hl-1"> ({ </span><span class="hl-5">author</span><span class="hl-1">, </span><span class="hl-5">email</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> ({</span><br/><span class="hl-1">    </span><span class="hl-5">author:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">value:</span><span class="hl-1"> { </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-5">author</span><span class="hl-1">, </span><span class="hl-5">email</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-5">model:</span><span class="hl-1"> </span><span class="hl-5">UserModel</span><span class="hl-1">, </span><span class="hl-6">// References User ListModel</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }),</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h2 id="event-driven-migration-architecture" class="tsd-anchor-link">Event-Driven Migration Architecture<a href="#event-driven-migration-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The migrator includes a built-in Event Bus for monitoring and controlling the migration process:</p>
<h3 id="built-in-console-logging" class="tsd-anchor-link">Built-in Console Logging<a href="#built-in-console-logging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>By default, RestMigrator uses the <code>ConsoleLogger</code> which provides detailed console output:</p>
<pre><code class="typescript"><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">RestMigrator</span><span class="hl-1">, </span><span class="hl-5">ConsoleLogger</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;mobx-restful-migrator&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">loadSourceArticles</span><span class="hl-1">, </span><span class="hl-5">ArticleModel</span><span class="hl-1">, </span><span class="hl-5">mapping</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./source&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// ConsoleLogger is used by default</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">migrator</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">RestMigrator</span><span class="hl-1">(</span><span class="hl-5">loadSourceArticles</span><span class="hl-1">, </span><span class="hl-5">ArticleModel</span><span class="hl-1">, </span><span class="hl-5">mapping</span><span class="hl-1">);</span><br/><br/><span class="hl-7">for</span><span class="hl-1"> </span><span class="hl-7">await</span><span class="hl-1"> (</span><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-8">title</span><span class="hl-1"> } </span><span class="hl-3">of</span><span class="hl-1"> </span><span class="hl-5">migrator</span><span class="hl-1">.</span><span class="hl-0">boot</span><span class="hl-1">()) {</span><br/><span class="hl-1">  </span><span class="hl-6">// Console automatically shows:</span><br/><span class="hl-1">  </span><span class="hl-6">// - saved No.X with source, mapped, and target data tables</span><br/><span class="hl-1">  </span><span class="hl-6">// - skipped No.X for duplicate unique fields</span><br/><span class="hl-1">  </span><span class="hl-6">// - error at No.X for migration errors</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// Your processing logic here</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`✅ Article migrated: </span><span class="hl-3">${</span><span class="hl-5">title</span><span class="hl-3">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="custom-event-handling" class="tsd-anchor-link">Custom Event Handling<a href="#custom-event-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Implement your own Event Bus for custom logging and monitoring:</p>
<pre><code class="typescript"><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">MigrationEventBus</span><span class="hl-1">, </span><span class="hl-5">MigrationProgress</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;mobx-restful-migrator&#39;</span><span class="hl-1">;</span><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">outputJSON</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;fs-extra&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-5">SourceArticle</span><span class="hl-1">, </span><span class="hl-5">Article</span><span class="hl-1">, </span><span class="hl-5">loadSourceArticles</span><span class="hl-1">, </span><span class="hl-5">ArticleModel</span><span class="hl-1">, </span><span class="hl-5">mapping</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./source&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-4">FileLogger</span><span class="hl-1"> </span><span class="hl-3">implements</span><span class="hl-1"> </span><span class="hl-4">MigrationEventBus</span><span class="hl-1">&lt;</span><span class="hl-4">SourceArticle</span><span class="hl-1">, </span><span class="hl-4">Article</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-5">bootedAt</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">().</span><span class="hl-0">toJSON</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">save</span><span class="hl-1">({ </span><span class="hl-5">index</span><span class="hl-1">, </span><span class="hl-5">sourceItem</span><span class="hl-1">, </span><span class="hl-5">targetItem</span><span class="hl-1"> }: </span><span class="hl-4">MigrationProgress</span><span class="hl-1">&lt;</span><span class="hl-4">SourceArticle</span><span class="hl-1">, </span><span class="hl-4">Article</span><span class="hl-1">&gt;) {</span><br/><span class="hl-1">    </span><span class="hl-6">// Log to file, send notifications, etc.</span><br/><span class="hl-1">    </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">outputJSON</span><span class="hl-1">(</span><span class="hl-2">`logs/save-</span><span class="hl-3">${</span><span class="hl-3">this</span><span class="hl-9">.</span><span class="hl-5">bootedAt</span><span class="hl-3">}</span><span class="hl-2">.json`</span><span class="hl-1">, {</span><br/><span class="hl-1">      </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;success&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">index</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">sourceId:</span><span class="hl-1"> </span><span class="hl-5">sourceItem</span><span class="hl-1">?.</span><span class="hl-5">id</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">targetId:</span><span class="hl-1"> </span><span class="hl-5">targetItem</span><span class="hl-1">?.</span><span class="hl-5">id</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">savedAt:</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">().</span><span class="hl-0">toJSON</span><span class="hl-1">(),</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">skip</span><span class="hl-1">({ </span><span class="hl-5">index</span><span class="hl-1">, </span><span class="hl-5">sourceItem</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1"> }: </span><span class="hl-4">MigrationProgress</span><span class="hl-1">&lt;</span><span class="hl-4">SourceArticle</span><span class="hl-1">, </span><span class="hl-4">Article</span><span class="hl-1">&gt;) {</span><br/><span class="hl-1">    </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">outputJSON</span><span class="hl-1">(</span><span class="hl-2">`logs/skip-</span><span class="hl-3">${</span><span class="hl-3">this</span><span class="hl-9">.</span><span class="hl-5">bootedAt</span><span class="hl-3">}</span><span class="hl-2">.json`</span><span class="hl-1">, {</span><br/><span class="hl-1">      </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;skipped&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">index</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">sourceId:</span><span class="hl-1"> </span><span class="hl-5">sourceItem</span><span class="hl-1">?.</span><span class="hl-5">id</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">error:</span><span class="hl-1"> </span><span class="hl-5">error</span><span class="hl-1">?.</span><span class="hl-5">message</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">skippedAt:</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">().</span><span class="hl-0">toJSON</span><span class="hl-1">(),</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-0">error</span><span class="hl-1">({ </span><span class="hl-5">index</span><span class="hl-1">, </span><span class="hl-5">sourceItem</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1"> }: </span><span class="hl-4">MigrationProgress</span><span class="hl-1">&lt;</span><span class="hl-4">SourceArticle</span><span class="hl-1">, </span><span class="hl-4">Article</span><span class="hl-1">&gt;) {</span><br/><span class="hl-1">    </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">outputJSON</span><span class="hl-1">(</span><span class="hl-2">`logs/error-</span><span class="hl-3">${</span><span class="hl-3">this</span><span class="hl-9">.</span><span class="hl-5">bootedAt</span><span class="hl-3">}</span><span class="hl-2">.json`</span><span class="hl-1">, {</span><br/><span class="hl-1">      </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">index</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">sourceId:</span><span class="hl-1"> </span><span class="hl-5">sourceItem</span><span class="hl-1">?.</span><span class="hl-5">id</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">error:</span><span class="hl-1"> </span><span class="hl-5">error</span><span class="hl-1">?.</span><span class="hl-5">message</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">errorAt:</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">().</span><span class="hl-0">toJSON</span><span class="hl-1">(),</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">migrator</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">RestMigrator</span><span class="hl-1">(</span><span class="hl-5">loadSourceArticles</span><span class="hl-1">, </span><span class="hl-5">ArticleModel</span><span class="hl-1">, </span><span class="hl-5">mapping</span><span class="hl-1">, </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">FileLogger</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#mobx-restful-migrator"><span>Mob<wbr/>X <wbr/>RES<wbr/>Tful migrator</span></a><ul><li><a href="#overview"><span>Overview</span></a></li><li><a href="#features"><span>Features</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#usage-example-database-migration"><span>Usage <wbr/>Example: <wbr/>Database migration</span></a></li><li><ul><li><a href="#source-data-schema"><span>Source <wbr/>Data <wbr/>Schema</span></a></li><li><a href="#target-models"><span>Target <wbr/>Models</span></a></li><li><a href="#migration-configuration"><span>Migration <wbr/>Configuration</span></a></li><li><a href="#optional-use-custom-event-bus"><span>Optional: <wbr/>Use custom event bus</span></a></li></ul></li><li><a href="#usage-example-data-crawler"><span>Usage <wbr/>Example: <wbr/>Data crawler</span></a></li><li><a href="#four-mapping-types"><span>Four <wbr/>Mapping <wbr/>Types</span></a></li><li><ul><li><a href="#1-simple-1-to-1-mapping"><span>1. <wbr/>Simple 1-<wbr/>to-<wbr/>1 <wbr/>Mapping</span></a></li><li><a href="#2-many-to-one-mapping"><span>2. <wbr/>Many-<wbr/>to-<wbr/>One <wbr/>Mapping</span></a></li><li><a href="#3-one-to-many-mapping"><span>3. <wbr/>One-<wbr/>to-<wbr/>Many <wbr/>Mapping</span></a></li><li><a href="#4-cross-table-relationships"><span>4. <wbr/>Cross-<wbr/>Table <wbr/>Relationships</span></a></li></ul></li><li><a href="#event-driven-migration-architecture"><span>Event-<wbr/>Driven <wbr/>Migration <wbr/>Architecture</span></a></li><li><ul><li><a href="#built-in-console-logging"><span>Built-<wbr/>in <wbr/>Console <wbr/>Logging</span></a></li><li><a href="#custom-event-handling"><span>Custom <wbr/>Event <wbr/>Handling</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">MobX RESTful migrator</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
